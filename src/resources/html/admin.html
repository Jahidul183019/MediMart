<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MediMart — Admin Login</title>
    <style>
        :root{
          /* Brand palette (from your JavaFX styles) */
          --brand-1:#B2EBF2;
          --brand-2:#C8E6C9;
          --primary:#26A69A;
          --danger:#f44336;
          --text-dark:rgba(0,0,0,.72);
          --label:#546e7a;
          --ok:#2e7d32;
          --err:#c62828;

          /* Card + glass */
          --glass-bg:rgba(255,255,255,.88);
          --glass-border:rgba(255,255,255,.55);
          --shadow:0 12px 28px rgba(0,0,0,.18);
          --radius:20px;
        }

        html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
        body{
          /* Root background gradient (ACCENT_GRADIENT) */
          background:linear-gradient(135deg,var(--brand-1),var(--brand-2));
        }

        .screen{
          min-height:100%;
          display:grid;
          place-items:center;
          padding:28px;
        }

        /* The card that *tries* to use the inside background image like your Java code */
        .card{
          width:min(880px,55vw);
          min-width:640px;
          height:min(700px,60vh);
          min-height:520px;

          position:relative;
          border-radius:var(--radius);
          box-shadow:var(--shadow);
          border:1.2px solid var(--glass-border);

          /* Background image applied by JS if available; fallback stays transparent so gradient shows */
          background-position:center;
          background-repeat:no-repeat;
          background-size:cover;
          overflow:hidden;
        }

        /* Frosted overlay for readability */
        .frost{
          position:absolute; inset:10px;
          background:var(--glass-bg);
          border-radius:16px;
          display:flex; align-items:center; justify-content:center;
          padding:28px;
        }

        .form{
          width:460px; max-width:92vw;
          display:flex; flex-direction:column; gap:18px;
          align-items:stretch; text-align:left;
        }

        .title{
          margin:0;
          font-size:28px;
          font-weight:700;
          color:#1f6f64;
          text-align:center;
        }

        .field{display:flex; flex-direction:column; gap:6px}
        .field label{font-size:12.5px;color:var(--text-dark)}
        .row{display:flex; align-items:center; gap:10px; flex-wrap:wrap}

        .input{
          background:rgba(255,255,255,.96);
          border:1.2px solid #B2DFDB;
          border-radius:10px;
          padding:10px 12px;
          font-size:13px;
          outline:none;
          transition:box-shadow .2s, border-color .2s;
        }
        .input:focus{
          border-color:var(--primary);
          box-shadow:0 0 0 6px rgba(38,166,154,.12);
        }
        .hint{font-size:12px;color:var(--text-dark)}

        .btn{
          appearance:none; border:0; border-radius:10px;
          padding:8px 18px; font-weight:700; cursor:pointer;
          transition:filter .15s, transform .02s;
        }
        .btn:active{transform:translateY(1px)}
        .btn-primary{background:var(--primary); color:#fff}
        .btn-danger{background:var(--danger); color:#fff}
        .btnbar{display:flex; justify-content:center; gap:14px}

        .message{min-height:1.4em; text-align:center; font-size:14px}
        .ok{color:var(--ok)}
        .err{color:var(--err)}

        /* Responsive guard for narrow windows */
        @media (max-width:760px){
          .card{min-width:auto; width:96vw; height:auto; min-height:560px}
        }
    </style>
</head>
<body>
<main class="screen">
    <section class="card" id="card">
        <div class="frost">
            <form class="form" id="loginForm" onsubmit="return false;">
                <h1 class="title">Admin Login</h1>

                <div class="field">
                    <label for="email">Email</label>
                    <input class="input" id="email" name="email" type="email" placeholder="Email" autocomplete="username" />
                </div>

                <div class="field">
                    <label for="password">Password</label>
                    <input class="input" id="password" name="password" type="password" placeholder="Password" autocomplete="current-password" />
                    <label class="row hint" style="user-select:none;">
                        <input type="checkbox" id="showPw" />
                        <span>Show password</span>
                    </label>
                </div>

                <div class="btnbar">
                    <button type="button" id="loginBtn" class="btn btn-primary">Login</button>
                    <button type="button" id="backBtn"  class="btn btn-danger">Back</button>
                </div>

                <div id="message" class="message"></div>
            </form>
        </div>
    </section>
</main>

<script>
    (function(){
      const byId = id => document.getElementById(id);
      const emailEl = byId('email');
      const passEl  = byId('password');
      const loginBtn= byId('loginBtn');
      const backBtn = byId('backBtn');
      const showPw  = byId('showPw');
      const msg     = byId('message');
      const card    = byId('card');

      // Try to apply the inside background image like your Java code.
      // Place the file at: /resources/web/images/login_background.png
      const imgPath = 'images/login_background.png';
      const testImg = new Image();
      testImg.onload  = () => { card.style.backgroundImage = `url(${imgPath})`; };
      testImg.onerror = () => {
        // Fallback: keep the same brand gradient inside card if image is missing
        card.style.backgroundImage = 'linear-gradient(135deg,var(--brand-1),var(--brand-2))';
      };
      testImg.src = imgPath;

      // Show password toggle
      showPw.addEventListener('change', () => {
        passEl.type = showPw.checked ? 'text' : 'password';
      });

      // Helper: trim safe
      const safe = s => (s || '').trim();

      // Login action (mirrors your Java logic)
      function doLogin(){
        const email = safe(emailEl.value);
        const pass  = safe(passEl.value);

        if (email === 'admin@medimart.com' && pass === 'admin123') {
          msg.textContent = 'Login successful!';
          msg.className = 'message ok';
          // In JavaFX, you call new AdminDashboard(...).show(stage)
          // From WebView you could notify Java via a JS bridge.
          // Placeholder hook:
          if (window.javaBridge && typeof window.javaBridge.onAdminLoginSuccess === 'function') {
            window.javaBridge.onAdminLoginSuccess(email);
          }
        } else {
          msg.textContent = 'Invalid email or password!';
          msg.className = 'message err';
        }
      }

      // Back action (mimics calling Main().start(stage) in Java)
      function goBack(){
        // If you expose a Java bridge, handle navigation there.
        if (window.javaBridge && typeof window.javaBridge.onBack === 'function') {
          window.javaBridge.onBack();
        } else {
          // Fallback: simple visual cue
          msg.textContent = 'Going back… (connect WebView bridge to handle navigation)';
          msg.className = 'message';
        }
      }

      loginBtn.addEventListener('click', doLogin);
      backBtn.addEventListener('click', goBack);

      // Keyboard shortcuts: Enter = login, Esc = back
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') { e.preventDefault(); doLogin(); }
        if (e.key === 'Escape') { e.preventDefault(); goBack(); }
      });

      // Autofocus like your Java code
      window.addEventListener('load', () => emailEl.focus());
    })();
</script>
</body>
</html>
